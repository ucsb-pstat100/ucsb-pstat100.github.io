<!DOCTYPE html>
<html lang="en"><head>
<link href="../../Images/Logos_Icons/hex.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Ethan P. Marzban">
  <title>PSTAT 100: Summer 2025 – PSTAT 100: Lecture 11</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-ce6bc8a5410e8df11883f060677c6af5.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="../../site_libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {enableAssistiveMml: false}});</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="Images/logo.svg" data-background-opacity="0.5" data-background-position="80% 50%" data-background-size="30%" class="quarto-title-block center">
  <h1 class="title">PSTAT 100: Lecture 11</h1>
  <p class="subtitle">Hypothesis Testing</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ethan P. Marzban 
</div>
        <p class="quarto-title-affiliation">
            Department of Statistics and Applied Probability; UCSB <br> <br>
          </p>
        <p class="quarto-title-affiliation">
            Summer Session A, 2025
          </p>
    </div>
</div>

</section>
<section class="slide level2">

<p><span class="math display">\[
\newcommand\R{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\1}{1\!\!1}
\newcommand{\comp}[1]{#1^{\complement}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\SD}{\mathrm{SD}}
\newcommand{\vect}[1]{\vec{\boldsymbol{#1}}}
\newcommand{\Cov}{\mathrm{Cov}}
\]</span></p>
<div class="cell">
<style type="text/css">
.hscroll {
  height: 100%;
  max-height: 600px;
  max-width: 2000px;
  overflow: scroll;
}

.hscroll2 {
  height: 100%;
  max-height: 300px;
  overflow: scroll;
}

.hscroll3 {
  max-width: 2rem;
  overflow: scroll;
}
</style>
</div>
</section>
<section id="live-demo-part-i" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Live Demo, Part I…</h2>
<p><strong>Question:</strong> Are bags of candies balanced?</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_038dc49c" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:12rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">07</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="recap" class="slide level2">
<h2><i class="fa-solid fa-backward-fast" aria-label="backward-fast"></i> Recap</h2>
<h3 id="general-framework-for-inference">General Framework for Inference</h3>
<div class="columns">
<div class="column" style="width:40%;">
<div class="fragment">
<p><img data-src="images/inference.svg"></p>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment"><p>We have a <span class="alert"><strong>population</strong></span>, governed by a set of <span class="alert"><strong>population parameters</strong></span> that are unobserved (but that we’d like to make claims about).</p></li>
<li class="fragment"><p>To make claims about the population parameters, we take a <span class="alert"><strong>sample</strong></span>.</p></li>
<li class="fragment"><p>We then use our sample to make <span class="alert"><strong>inferences</strong></span> (i.e.&nbsp;claims) about the population parameters.</p></li>
</ul>
</div></div>
<ul>
<li class="fragment">Inference could mean <span class="alert"><strong>estimation</strong></span> or <span class="alert"><strong>hypothesis testing</strong></span></li>
</ul>
</section>
<section>
<section id="intro-to-hypothesis-testing" class="title-slide slide level1 center" data-background-color="black" data-background-image="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmpqZWM2amk3cGtkbmR0cng2cjgyemg0b3J1dHNuM3o4dHZqeHVwbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/gw3IWyGkC0rsazTi/200.gif" data-background-size="fill">
<h1>Intro to Hypothesis Testing</h1>

</section>
<section id="cats---again" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Cats - Again!</h2>
<h3 id="toe-beans">Toe Beans…</h3>
<ul>
<li class="fragment">According to a <a href="https://www.quora.com/What-percentage-of-cats-are-born-with-6-toes#:~:text=Your%20average%20domesticated%20cat%20has,the%20litter%20will%20be%20polys." target="_blank">Quora post</a>, the average cat has about a 10% chance of being born with <em>polydactyly</em></li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Images/polydactyl.png"></p>
<figcaption>Image Source: https://www.treehugger.com/thing-didnt-know-polydactyl-cats-4864197</figcaption>
</figure>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment"><p>Polydactyly refers to a condition whereby an animal is born with extra digits (e.g.&nbsp;extra fingers in humans, extra toes in cats, etc.)</p></li>
<li class="fragment"><p>Suppose we wish to assess the validity of the <em>Quora</em> claim, using data.</p>
<ul>
<li class="fragment">Note that we’re not necessarily trying to estimate the true incidence of polydactyly among cats!</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="cats---again-1" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Cats - Again!</h2>
<h3 id="toe-beans-1">Toe Beans…</h3>
<ul>
<li class="fragment"><p>Say we collect a simple random sample of 100 cats, and observe 9 polydactyl cats in this sample (i.e.&nbsp;<span class="math inline">\(\widehat{p}\)</span> = 9%).</p></li>
<li class="fragment"><p>Does this provide concrete evidence that the <em>Quora</em> claim is incorrect? Not really!</p></li>
<li class="fragment"><p>But, say our sample of 100 cats contains 80 polydactyl cats (<span class="math inline">\(\widehat{p}\)</span> = 80%). Or, say we saw only 1 polydactyl cat in a sample of 100 (<span class="math inline">\(\widehat{p}\)</span> = 1%).</p></li>
<li class="fragment"><p>Now, it is <em>possible</em> that the <em>Quora</em> claim is true and we just happened to get <em>extraordinarily</em> lucky (or unlucky).</p></li>
<li class="fragment"><p>But, it’s probably more likely that we should start to question the validity of the <em>Quora</em> statistic.</p></li>
</ul>
</section>
<section id="hypothesis-testing" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass-chart" aria-label="magnifying-glass-chart"></i> Hypothesis Testing</h2>
<h3 id="general-framework">General Framework</h3>
<ul>
<li class="fragment"><p>So where’s the cutoff - how many polydactyl cats do we need to observe in a sample of <em>n</em> before we start to question the <em>Quora</em> statistic?</p></li>
<li class="fragment"><p>This is the general framework of <span class="alert"><strong>hypothesis testing</strong></span>.</p></li>
<li class="fragment"><p>We start off with a pair of competing claims, called the <span class="alert"><strong>null hypothesis</strong></span> and the <span class="alert"><strong>alternative hypothesis</strong></span>.</p>
<ul>
<li class="fragment">The null hypothesis is usually set to be the “status quo”. For instance, in our polydactyly example, we would set the null hypothesis (denoted <em>H</em><sub>0</sub>, and read “H-naught”) to be “10% of cats are polydactyl.”</li>
</ul></li>
</ul>
</section>
<section id="hypothesis-testing-1" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass-chart" aria-label="magnifying-glass-chart"></i> Hypothesis Testing</h2>
<h3 id="null-hypothesis">Null Hypothesis</h3>
<ul>
<li class="fragment"><p>It’s customary to phrase the null and alternative hypotheses mathematically (as opposed to verbally).</p></li>
<li class="fragment"><p>For example, letting <em>p</em> denote the proportion of polydactyl cats, the null hypothesis in our <em>Quora</em> example would be <span class="math display">\[ H_0: \ p = 0.1 \]</span></p></li>
<li class="fragment"><p>For now, we’ll consider what is known as a <span class="alert"><strong>simple null hypothesis</strong></span> where the null is “parameter equals some value”.</p>
<ul>
<li class="fragment">Later, we’ll generalize and consider null hypotheses like <em>H</em><sub>0</sub>: <em>p</em> ≥ 0.1.</li>
</ul></li>
<li class="fragment"><p>As a rule-of-thumb, the null should include some form of equality; e.g.&nbsp;<em>p</em> &gt; 0.1 is <em>not</em> a valid null whereas <em>p</em> ≥ 0.1 is.</p></li>
</ul>
</section>
<section id="hypothesis-testing-2" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass-chart" aria-label="magnifying-glass-chart"></i> Hypothesis Testing</h2>
<h3 id="alternative-hypothesis">Alternative Hypothesis</h3>
<ul>
<li class="fragment"><p>The alternative hypothesis, as the name suggests, provides an <em>alternative</em> to the null: if the null is in fact false, what is the truth?</p></li>
<li class="fragment"><p>Given a null of the form <em>H</em><sub>0</sub>: <em>p</em> = <em>p</em><sub>0</sub> for some <span class="alert"><strong>null value</strong></span> <em>p</em><sub>0</sub>, there are four main alternatives from which we can choose:</p>
<ol type="1">
<li class="fragment"><span class="alert"><strong>Lower-Tailed</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>p</em> &lt; <em>p</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Upper-Tailed</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>p</em> &gt; <em>p</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Two-Tailed</strong></span> (aka <span class="alert"><strong>Two-Sided</strong></span>): <em>H</em><sub><em>A</em></sub>: <em>p</em> ≠ <em>p</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Simple-vs-Simple</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>p</em> = <em>p</em><sub><em>A</em></sub> for some <em>p</em><sub><em>A</em></sub> ≠ <em>p</em><sub>0</sub></li>
</ol></li>
<li class="fragment"><p>To stress: we must pick <em>one</em> of these to be the alternative, and we must pick this before starting our test.</p></li>
</ul>
</section>
<section id="hypothesis-testing-3" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass-chart" aria-label="magnifying-glass-chart"></i> Hypothesis Testing</h2>
<h3 id="general-parameter">General Parameter</h3>
<ul>
<li class="fragment"><p>We can perform hypothesis testing on any population parameter.</p>
<ul>
<li class="fragment">We usually use <em>θ</em> (the Greek letter “theta”) as a placeholder for an arbitrary population parameter.</li>
</ul></li>
<li class="fragment"><p>Null: <em>H</em><sub>0</sub>: <em>θ</em> = <em>θ</em><sub>0</sub> (e.g.&nbsp;‘the average weight of all cats is 9.75 lbs’; ‘the standard deviation of all CO<sub>2</sub> emissions is 5.4 mt/yr’; etc.)</p></li>
<li class="fragment"><p>Alternative: pick one of the following:</p>
<ol type="1">
<li class="fragment"><span class="alert"><strong>Lower-Tailed</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>θ</em> &lt; <em>θ</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Upper-Tailed</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>θ</em> &gt; <em>θ</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Two-Tailed</strong></span> (aka <span class="alert"><strong>Two-Sided</strong></span>): <em>H</em><sub><em>A</em></sub>: <em>θ</em> ≠ <em>θ</em><sub>0</sub></li>
<li class="fragment"><span class="alert"><strong>Simple-vs-Simple</strong></span>: <em>H</em><sub><em>A</em></sub>: <em>θ</em> = <em>θ</em><sub><em>A</em></sub> for some <em>θ</em><sub><em>A</em></sub> ≠ <em>θ</em><sub>0</sub></li>
</ol></li>
</ul>
</section>
<section id="hypothesis-testing-4" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass-chart" aria-label="magnifying-glass-chart"></i> Hypothesis Testing</h2>
<h3 id="alternative-hypothesis-1">Alternative Hypothesis</h3>
<ul>
<li class="fragment"><p>It is <em>absolutely crucial</em> that the null and alternative hypotheses cannot be simultaneously true.</p></li>
<li class="fragment"><p>For instance, if <em>H</em><sub>0</sub>: <em>p</em> = <em>p</em><sub>0</sub>, then <em>H</em><sub><em>A</em></sub>: <em>p</em> ≥ <em>p</em><sub>0</sub> is <strong>not</strong> a valid alternative hypothesis.</p>
<ul>
<li class="fragment">This is because, if the true value of <em>p</em> is in fact <em>p</em><sub>0</sub>, then the null and alternative <em>both</em> become true!</li>
</ul></li>
<li class="fragment"><p>Additionally, in a real-world setting, it will be up to you to pick which type of alternative to use.</p>
<ul>
<li class="fragment">On In-Class Assessments, we’ll often tell you which type of alternative to use.</li>
</ul></li>
</ul>
</section>
<section id="polydactyly-example" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<ul>
<li class="fragment"><p>Back to cats! Specifically, suppose we wish to test <strong>H<sub>0</sub>:</strong> <em>p</em> = 0.1 against a <em>two-sided</em> alternative <strong>H<sub>A</sub>:</strong> <em>p</em> ≠ 0.1.</p></li>
<li class="fragment"><p>We previously gained some intuition: If the observed sample proportion of polydactyl cats is, say, 9%, we’d probably <em>not</em> reject the null. But, if the observed sample proportion is 80% or 1%, we’d probably reject the null in favor of the alternative.</p></li>
<li class="fragment"><p>So, this reveals a couple of things:</p>
<ul>
<li class="fragment">Our test will likely depend on a <em>point estimator</em> (which is part of the reason we discussed point estimators first!)</li>
<li class="fragment">We reject the null in favor of a two-sided alternative if the observed value of the point estimator is <em>very far</em> from the null value.</li>
</ul></li>
</ul>
</section>
<section id="polydactyly-example-1" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<ul>
<li class="fragment"><p>Here’s another way to rephrase this.</p></li>
<li class="fragment"><p>We know to reject the null if <span class="math inline">\(\widehat{P}_n\)</span> - the observed sample proportion of polydactyl cats - is very far from our null value (10%).</p></li>
<li class="fragment"><p>Now, even if the null <em>were</em> true, we would still expect some variation - after all, <span class="math inline">\(\widehat{P}_n\)</span> is random.</p></li>
<li class="fragment"><p>So, our question is: if we assume the true proportion of polydactyl cats is 10%, is the discrepancy between 10% and our observed proportion of polydactyly too large to be due to chance?</p></li>
<li class="fragment"><p>This requires information about the <em>sampling distribution</em> of <span class="math inline">\(\widehat{P}_n\)</span>!</p></li>
</ul>
</section>
<section id="polydactyly-example-2" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<ul>
<li class="fragment"><p>Just like we saw before, there are two ways we could go about obtaining the sampling distribution of <span class="math inline">\(\widehat{P}_n\)</span>: through simulations, or through theory.</p></li>
<li class="fragment"><p>Let’s start with simulations!</p></li>
<li class="fragment"><p>I’ve gone ahead and created a (hypothetical) population of one million cats, some of which have polydactyly (encoded as <code>"poly"</code>) and some of which do not (encoded as <code>"non"</code>).</p>
<ul>
<li class="fragment">I won’t tell you how many of each there are!</li>
<li class="fragment">For now, I’ll replicate the steps we took in lecture before (which are the steps you took on Lab 04 as well) to construct an approximation to the sampling distribution of the sample proportion.</li>
</ul></li>
</ul>
</section>
<section id="polydactyly-example-3" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>pop <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"cats_pop.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() </span>
<span id="cb1-2"><a></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a>props <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb1-5"><a></a><span class="cf">for</span>(b <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb1-6"><a></a>  temp_samp <span class="ot">&lt;-</span> <span class="fu">sample</span>(pop, <span class="at">size =</span> <span class="dv">2500</span>)</span>
<span id="cb1-7"><a></a>  props <span class="ot">&lt;-</span> <span class="fu">c</span>(props, <span class="fu">ifelse</span>(temp_samp <span class="sc">==</span> <span class="st">"poly"</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">mean</span>())</span>
<span id="cb1-8"><a></a>}</span>
<span id="cb1-9"><a></a></span>
<span id="cb1-10"><a></a><span class="fu">data.frame</span>(<span class="at">x =</span> props) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb1-11"><a></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(density)), <span class="at">bins =</span> <span class="dv">13</span>, <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb1-12"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>) <span class="sc">+</span> </span>
<span id="cb1-13"><a></a>  <span class="fu">ggtitle</span>(<span class="st">"Histogram of Sample Proportions"</span>,</span>
<span id="cb1-14"><a></a>          <span class="at">subtitle =</span> <span class="st">"1000 samples of size 2500"</span>) <span class="sc">+</span></span>
<span id="cb1-15"><a></a>  <span class="fu">xlab</span>(<span class="st">"sample proportion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="Lec11_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="demoivre-laplace-theorem" class="slide level2">
<h2><i class="fa-solid fa-toggle-off" aria-label="toggle-off"></i> DeMoivre-Laplace Theorem</h2>
<h3 id="sampling-distribution-of-the-sample-proportion">Sampling Distribution of the Sample Proportion</h3>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>DeMoivre-Laplace Theorem</strong></strong></p>
</div>
<div class="callout-content">
<p>Let <span class="math inline">\(0 &lt; p &lt; 1\)</span> be fixed and <span class="math inline">\(S_n \sim \mathrm{Bin}(n, p)\)</span>. Then <span class="math display">\[ \left( \frac{S_n - np}{\sqrt{np(1 - p)}} \right) \stackrel{\cdot}{\sim} \mathcal{N}(0, 1) \qquad \text{equivalently,} \qquad  \left( \frac{\widehat{P}_n - p}{\sqrt{\frac{p(1 - p)}{n}}} \right) \stackrel{\cdot}{\sim} \mathcal{N}(0, 1)  \]</span></p>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">Just like the CLT, this is just a mathematically rigorous way of stating a claim about the sampling distribution of an estimator (in this case, the sample proportion).</li>
</ul>
</section>
<section id="polydactyly-example-4" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">data.frame</span>(<span class="at">x =</span> props) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb2-2"><a></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(density)), <span class="at">bins =</span> <span class="dv">13</span>, <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb2-3"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>) <span class="sc">+</span> </span>
<span id="cb2-4"><a></a>  <span class="fu">ggtitle</span>(<span class="st">"Histogram of Sample Proportions"</span>,</span>
<span id="cb2-5"><a></a>          <span class="at">subtitle =</span> <span class="st">"1000 samples of size 2500"</span>) <span class="sc">+</span></span>
<span id="cb2-6"><a></a>  <span class="fu">xlab</span>(<span class="st">"sample proportion"</span>) <span class="sc">+</span></span>
<span id="cb2-7"><a></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb2-8"><a></a>                <span class="at">args =</span> </span>
<span id="cb2-9"><a></a>                  <span class="fu">list</span>(</span>
<span id="cb2-10"><a></a>                    <span class="at">mean =</span> <span class="fu">mean</span>(pop <span class="sc">==</span> <span class="st">"poly"</span>),</span>
<span id="cb2-11"><a></a>                    <span class="at">sd =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>(pop <span class="sc">==</span> <span class="st">"poly"</span>) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">mean</span>(pop <span class="sc">==</span> <span class="st">"poly"</span>)) <span class="sc">/</span> <span class="dv">2500</span>)</span>
<span id="cb2-12"><a></a>                  ),</span>
<span id="cb2-13"><a></a>                <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span></span>
<span id="cb2-14"><a></a>              )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="Lec11_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch"></section>
<section id="polydactyly-example-5" class="slide level2">
<h2><i class="fa-solid fa-cat" aria-label="cat"></i> Polydactyly Example</h2>
<ul>
<li class="fragment">Alright, let’s go back to our hypothesis test. Our test takes the form:</li>
</ul>
<div class="fragment" style="font-size:24px">
<p><span class="math display">\[ \texttt{decision}(\texttt{data}) = \begin{cases} \text{Reject $H_0$ in favor of $H_A$} &amp; \text{if } |\widehat{P}_n - p_0| &gt; c \\ \text{Fail to Reject $H_0$} &amp; \text{if } |\widehat{P}_n - p_0| \leq c \\ \end{cases}\]</span></p>
</div>
<ul>
<li class="fragment"><p><span class="math inline">\(\{|\widehat{P}_n - p_0| &gt; c\}\)</span> is just a mathematical way of saying “the distance between <span class="math inline">\(\widehat{P}_n\)</span> and <span class="math inline">\(p_0\)</span> is large”</p></li>
<li class="fragment"><p>It’s customary to standardize:</p></li>
</ul>
<div class="fragment" style="font-size:24px">
<p><span class="math display">\[ \texttt{decision}(\texttt{data}) = \begin{cases} \text{Reject $H_0$ in favor of $H_A$} &amp; \text{if } \left| \frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}} \right| &gt; k \\ \text{Fail to Reject $H_0$} &amp; \text{if } \left| \frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}} \right| \leq k \\ \end{cases}\]</span></p>
</div>
</section>
<section id="states-of-the-world" class="slide level2">
<h2><i class="fa-solid fa-scale-unbalanced" aria-label="scale-unbalanced"></i> States of the World</h2>
<ul>
<li class="fragment"><p>In a given hypothesis testing setting, the null is either true or not (though we won’t ever get to know for sure).</p></li>
<li class="fragment"><p>Independently, our test will either reject the null or not.</p></li>
<li class="fragment"><p>This leads to four states of the world:</p></li>
</ul>
<div class="fragment">
<table>
<tbody><tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td colspan="2" padding-left:10px;="" background-color:="" #c4eef2;="" style="text-align: center"><b>Result of Test</b></td>
</tr>
<tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Reject</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Fail to Reject</b>
</td>
</tr>
<tr>
<td style="border: 0px solid black; text-align: center; vertical-align: middle;" rowspan="2">
<b><i>H</i><sub>0</sub></b>
</td>
<td style="border: 0px solid black;">
<b>True</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:red">
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center">
</td>
</tr>
<tr>
<td style="border: 0px solid black;">
<b>False</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center">
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center">
</td>
</tr>
</tbody></table>
</div>
<p><br>
</p>
<ul>
<li class="fragment">Some of these states are good, others are bad. Which are which?</li>
</ul>
</section>
<section id="states-of-the-world-1" class="slide level2">
<h2><i class="fa-solid fa-scale-unbalanced" aria-label="scale-unbalanced"></i> States of the World</h2>
<table>
<tbody><tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td colspan="2" padding-left:10px;="" background-color:="" #c4eef2;="" style="text-align: center"><b>Result of Test</b></td>
</tr>
<tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Reject</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Fail to Reject</b>
</td>
</tr>
<tr>
<td style="border: 0px solid black; text-align: center; vertical-align: middle;" rowspan="2">
<b><i>H</i><sub>0</sub></b>
</td>
<td style="border: 0px solid black;">
<b>True</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:red">
<b>BAD</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:green">
<b>GOOD</b>
</td>
</tr>
<tr>
<td style="border: 0px solid black;">
<b>False</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:green">
<b>GOOD</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:red">
<b>BAD</b>
</td>
</tr>
</tbody></table>
<p><br>
</p>
<ul>
<li class="fragment">We give names to the two “bad” situations: <strong>Type I</strong> and <strong>Type II</strong> errors.</li>
</ul>
<div class="fragment">
<table>
<tbody><tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td colspan="2" padding-left:10px;="" background-color:="" #c4eef2;="" style="text-align: center"><b>Result of Test</b></td>
</tr>
<tr>
<td style="border: 0px solid black;">
</td>
<td style="border: 0px solid black;">
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Reject</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; width:5cm; text-align: center">
<b>Fail to Reject</b>
</td>
</tr>
<tr>
<td style="border: 0px solid black; text-align: center; vertical-align: middle;" rowspan="2">
<b><i>H</i><sub>0</sub></b>
</td>
<td style="border: 0px solid black;">
<b>True</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:red">
<b>Type I Error</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:green">
<b>GOOD</b>
</td>
</tr>
<tr>
<td style="border: 0px solid black;">
<b>False</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:green">
<b>GOOD</b>
</td>
<td style="border: 1px solid black; padding-right:10px;  padding-left:10px; text-align:center; color:red">
<b>Type II Error</b>
</td>
</tr>
</tbody></table>
</div>
</section>
<section id="states-of-the-world-2" class="slide level2">
<h2><i class="fa-solid fa-scale-unbalanced" aria-label="scale-unbalanced"></i> States of the World</h2>
<h3 id="type-i-and-type-ii-errors">Type I and Type II Errors</h3>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Definition:</strong> Type I and Type II errors</strong></p>
</div>
<div class="callout-content">
<div style="font-size: 25px">
<ul>
<li>A <span class="alert"><strong>Type I Error</strong></span> occurs when we reject <span class="math inline">\(H_0\)</span>, when <span class="math inline">\(H_0\)</span> was actually true.</li>
<li>A <span class="alert"><strong>Type II Error</strong></span> occurs when we fail to reject <span class="math inline">\(H_0\)</span>, when <span class="math inline">\(H_0\)</span> was actually false.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment"><p>A common way of interpreting Type I and Type II errors are in the context of the judicial system.</p></li>
<li class="fragment"><p>The US judicial system is built upon a motto of “innocent until proven guilty.” As such, the null hypothesis is that a given person is innocent.</p></li>
<li class="fragment"><p>A Type I error represents convicting an innocent person.</p></li>
<li class="fragment"><p>A Type II error represents letting a guilty person go free.</p></li>
</ul>
</section>
<section id="states-of-the-world-3" class="slide level2">
<h2><i class="fa-solid fa-scale-unbalanced" aria-label="scale-unbalanced"></i> States of the World</h2>
<h3 id="type-i-and-type-ii-errors-1">Type I and Type II Errors</h3>
<ul>
<li class="fragment"><p>Viewing the two errors in the context of the judicial system also highlights a tradeoff.</p></li>
<li class="fragment"><p>If we want to reduce the number of times we wrongfully convict an innocent person, we may want to make the conditions for convicting someone even stronger.</p></li>
<li class="fragment"><p>But, this would have the consequence of having fewer people overall convicted, thereby (and inadvertently) <em>increasing</em> the chance we let a guilty person go free.</p></li>
<li class="fragment"><p>As such, <u>controlling for one type of error increses the likelihood of committing the other type.</u></p></li>
</ul>
</section>
<section id="hypothesis-test-for-a-proportion" class="slide level2">
<h2><i class="fa-solid fa-chart-pie" aria-label="chart-pie"></i> Hypothesis Test for a Proportion</h2>
<ul>
<li class="fragment"><p>Let’s return to our task of constructing a hypothesis test for a proportion.</p></li>
<li class="fragment"><p>We had, for some (as-of-yet undetermined) <span class="alert"><strong>critical value</strong></span> <em>k</em>,</p></li>
</ul>
<div class="fragment" style="font-size:28px">
<p><span class="math display">\[ \texttt{decision}(\texttt{data}) = \begin{cases} \text{Reject $H_0$ in favor of $H_A$} &amp; \text{if } \left| \frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}} \right| &gt; k \\ \text{Fail to Reject $H_0$} &amp; \text{if } \left| \frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}} \right| \leq k \\ \end{cases}\]</span></p>
</div>
<ul>
<li class="fragment">Here’s the idea: we start by fixing the probability of committing a Type I error (called the <span class="alert"><strong>level of significance</strong></span>) to some small number α (the Greek letter “alpha”).
<ul>
<li class="fragment">This will, in turn, yield an equation which can be solved for <em>k</em>.</li>
</ul></li>
</ul>
</section>
<section id="hypothesis-test-for-a-proportion-1" class="slide level2">
<h2><i class="fa-solid fa-chart-pie" aria-label="chart-pie"></i> Hypothesis Test for a Proportion</h2>
<ul>
<li class="fragment"><p>By definition, α is the probability of rejecting a true null. So, <span class="math display">\[ \alpha := \Prob_{H_0}\left( \left| \frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}} \right| &gt; k \right) \]</span> where <span class="math inline">\(\Prob_{H_0}\)</span> is just a shorthand for “probability of (…), under the null”.</p></li>
<li class="fragment"><p>The DeMoivre-Laplace theorem tells us that, under the null, <span class="math inline">\(\frac{\widehat{P}_n - p_0}{\sqrt{\frac{p_0 (1 - p_0)}{n}}}\)</span> is well-approximated by a standard normal distribution.</p></li>
</ul>
</section>
<section id="hypothesis-test-for-a-proportion-2" class="slide level2">
<h2><i class="fa-solid fa-chart-pie" aria-label="chart-pie"></i> Hypothesis Test for a Proportion</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="Lec11_files/figure-revealjs/unnamed-chunk-5-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">The curve represents the density of the test statistic, under the null.</li>
<li class="fragment">By construction, the shaded areas must together equal α.</li>
</ul>
</div></div>
<ul>
<li class="fragment"><p>Therefore, the equation we have is <span class="math display">\[ 2[1 - \Phi(k)] = \alpha \ \implies \ \boxed{k = \Phi^{-1}\left( 1 - \frac{\alpha}{2} \right)}\]</span></p></li>
<li class="fragment"><p>Remember, we set the value of α at the beginning, to some small number.</p>
<ul>
<li class="fragment">Some common significance levels are 0.01, 0.05, and 0.1, though certain contexts may require smaller or higher levels of significance.</li>
</ul></li>
</ul>
</section>
<section id="hypothesis-test-for-a-proportion-3" class="slide level2">
<h2><i class="fa-solid fa-chart-pie" aria-label="chart-pie"></i> Hypothesis Test for a Proportion</h2>
<h3 id="two-sided-case">Two-Sided Case</h3>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Two-Sided Test for a Proportion:</strong></strong></p>
</div>
<div class="callout-content">
<div style="font-size: 25px">
<p>When testing <em>H</em><sub>0</sub>: <em>p</em> = <em>p</em><sub>0</sub> vs <em>H</em><sub><em>A</em></sub>: <em>p</em> ≠ <em>p</em><sub>0</sub> at an α level of significance, where <em>p</em> denotes a population proportion, the test takes the form <span class="math display">\[ \text{Reject $H_0$ if } \left| \frac{\widehat{p}_n - p_0}{\sqrt{ \frac{p_0 (1 - p_0)}{n}}} \right| &gt; \Phi^{-1}\left( 1 - \frac{\alpha}{2} \right) \]</span></p>
</div>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">The set of observed values of the <span class="alert"><strong>test statistic</strong></span> (in this case, the absolute value quantity that appears in the test above) that correspond to a rejection is called the <span class="alert"><strong>rejection region</strong></span>.</li>
</ul>
</section>
<section id="hypothesis-test-for-a-proportion-4" class="slide level2">
<h2><i class="fa-solid fa-chart-pie" aria-label="chart-pie"></i> Hypothesis Test for a Proportion</h2>
<h3 id="upper--and-lower-tailed">Upper- and Lower-Tailed</h3>
<ul>
<li class="fragment"><p><strong>Upper-Tailed Test:</strong> Reject <em>H</em><sub>0</sub> if <span class="math inline">\(\displaystyle \frac{\widehat{P}_n - p_0}{\sqrt{ \frac{p_0 (1 - p_0)}{n}}}  &gt; \Phi^{-1}(1 - \alpha)\)</span><br>
</p></li>
<li class="fragment"><p><strong>Lower-Tailed Test:</strong> Reject <em>H</em><sub>0</sub> if <span class="math inline">\(\displaystyle \frac{\widehat{P}_n - p_0}{\sqrt{ \frac{p_0 (1 - p_0)}{n}}} &lt; \Phi^{-1}(\alpha)\)</span></p></li>
</ul>
<p><br>
</p>
<ul>
<li class="fragment">My advice: draw a picture!</li>
</ul>
</section>
<section id="live-demo-part-ii" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Live Demo, Part II!</h2>
<ul>
<li><p>Let <em>p</em> denote the true proportion (among all candies manufactured by this brand, in the world) of green candies.</p></li>
<li><p><strong>Null:</strong> <em>p</em> = 0.2 (i.e.&nbsp;1/5).</p>
<ul>
<li><strong>Alternative:</strong> <em>p</em> ≠ 0.2.</li>
</ul></li>
<li><p><strong>Question:</strong> At a 5% level of significance, should we reject the null in favor of the alternative?</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_e00c7745" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:7rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="p-values" class="slide level2">
<h2><i class="fa-solid fa-chart-area" aria-label="chart-area"></i> <em>p</em>-Values</h2>
<ul>
<li class="fragment"><p>Instead of phrasing our test in terms of critical values, we can equivalently formulate things in terms of what is known as a <span class="alert"><strong><em>p</em>-value</strong></span>.</p></li>
<li class="fragment"><p>The <em>p</em>-value of an observed value of a test statistic is the probability, under the null, of observing something as or more extreme (in the direction of the alternative) as what was observed.</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">Lower-tailed: ℙ(TS &lt; ts)</li>
<li class="fragment">Upper-tailed: ℙ(TS &gt; ts)</li>
<li class="fragment">Two-sided: ℙ(|TS| &gt; ts)</li>
</ul>
<p><br>
</p>
<ul>
<li class="fragment">Again, draw a picture!</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="Lec11_files/figure-revealjs/unnamed-chunk-7-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div></div>
</section>
<section id="your-turn" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Your Turn!</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Your Turn!</strong></strong></p>
</div>
<div class="callout-content">
<p>A particular community college claims that 78% of its students continue on to a four-year university. To test these claims, an auditor takes a representative sample of 100 students, and finds that 72 continue on to a four-year university.</p>
<ol type="a">
<li><p>In the context of this problem, what is a Type I error? What about a Type II error? Use words!</p></li>
<li><p>Use the provided data to test the college’s claims against a two-sided alternative at a 5% level of significance. For practice, conduct your test once using critical values and then again using <em>p</em>-values.</p></li>
</ol>
</div>
</div>
</div>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Caution</strong></strong></p>
</div>
<div class="callout-content">
<p>You’ll need a computer for this one!</p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_6be072bc" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:6rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="your-turn-2" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Your Turn!</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Your Turn!</strong></strong></p>
</div>
<div class="callout-content">
<p>According to the <em>World Bank</em>, 54.2% of households in Ethiopia live with access to electricity. Prior evidence suggests, however, that the true proportion may be higher than this number; as such, a sociologist decides to test the <em>World Bank</em>’s claims against an upper-tailed alternative at a 5% level of significance. She collects a representative sample of 130 Ethiopian households, and observes that 67 of these households live with access to electricity. Using the sociologist’s data, conduct the test and phrase your conclusions in the context of the problem. For practice, conduct your test once using critical values and once using <em>p</em>-values.</p>
</div>
</div>
</div>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Caution</strong></strong></p>
</div>
<div class="callout-content">
<p>You’ll need a computer for this one!</p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_d2644647" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:6rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="next-time" class="slide level2">
<h2><i class="fa-solid fa-forward-fast" aria-label="forward-fast"></i> Next Time</h2>
<ul>
<li class="fragment"><p>On Monday, we’ll pick up with some more hypothesis testing.</p>
<ul>
<li class="fragment">We’ll consider hypothesis tests for a population mean</li>
<li class="fragment">We’ll also consider hypothesis across multiple populations</li>
</ul></li>
<li class="fragment"><p>In lab today, you’ll get some practice with more advanced sampling techniques, including <strong>Monte Carlo Methods</strong>.</p></li>
<li class="fragment"><p><span class="alert"><strong>FINAL REMINDER</strong></span>: the Mid-Quarter Project is due <span class="alert"><strong>THIS SUNDAY</strong></span>, July 13, 2025 by 11:59pm on Gradescope.</p></li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="Images/logo.svg" class="slide-logo"></p>
<div class="footer footer-default">
<p>PSTAT 100 - Data Science: Concepts and Analysis, Summer 2025 with Ethan P. Marzban</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>