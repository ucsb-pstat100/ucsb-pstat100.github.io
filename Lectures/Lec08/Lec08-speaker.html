<!DOCTYPE html>
<html lang="en"><head>
<link href="../../Images/Logos_Icons/hex.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Ethan P. Marzban">
  <title>PSTAT 100: Summer 2025 – PSTAT 100: Lecture 08</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-ce6bc8a5410e8df11883f060677c6af5.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="../../site_libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {enableAssistiveMml: false}});</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="Images/logo.svg" data-background-opacity="0.5" data-background-position="80% 50%" data-background-size="30%" class="quarto-title-block center">
  <h1 class="title">PSTAT 100: Lecture 08</h1>
  <p class="subtitle">Study Design and Sampling Techniques</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ethan P. Marzban 
</div>
        <p class="quarto-title-affiliation">
            Department of Statistics and Applied Probability; UCSB <br> <br>
          </p>
        <p class="quarto-title-affiliation">
            Summer Session A, 2025
          </p>
    </div>
</div>

</section>
<section class="slide level2">

<p><span class="math display">\[
\newcommand{\Prob}{\mathbb{P}}
\newcommand\R{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\1}{1\!\!1}
\newcommand{\comp}[1]{#1^{\complement}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\SD}{\mathrm{SD}}
\newcommand{\vect}[1]{\vec{\boldsymbol{#1}}}
\newcommand{\Cov}{\mathrm{Cov}}
\]</span></p>
<div class="cell">
<style type="text/css">
.hscroll {
  height: 100%;
  max-height: 600px;
  max-width: 2000px;
  overflow: scroll;
}

.hscroll2 {
  height: 100%;
  max-height: 300px;
  overflow: scroll;
}

.hscroll3 {
  max-width: 2rem;
  overflow: scroll;
}
</style>
</div>
</section>
<section id="congrats-on-finishing-ica01" class="slide level2">
<h2><i class="fa-solid fa-champagne-glasses" aria-label="champagne-glasses"></i> Congrats On Finishing ICA01!</h2>
<ul>
<li class="fragment"><p>Congratulations on finishing ICA01!</p></li>
<li class="fragment"><p>Grades have been released; allow me to say a few words about the ICA before we proceed with today’s lecture material.</p></li>
<li class="fragment"><p>First of all, I’ve posted both solutions to the ICA along with an additional document outlining some of the problems that seemed to trip people up the most.</p>
<ul>
<li class="fragment">Please read through BOTH OF THESE before submitting a regrade request.</li>
</ul></li>
<li class="fragment"><p>Regrade requests must be submitted before 11:59pm on Wednesday July 9, 2025 through Gradescope.</p>
<ul>
<li class="fragment">Kindly note: we reserve the right to regrade your <em>entire</em> ICA, not just the question/s you request a regrade for.</li>
</ul></li>
</ul>
</section>
<section id="recap-the-dsl" class="slide level2">
<h2><i class="fa-solid fa-backward-fast" aria-label="backward-fast"></i> Recap: The DSL</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="Images/dsl_simple.svg"></p>
</div><div class="column" style="width:60%;">

</div></div>
</section>
<section id="recap-the-dsl-1" class="slide level2">
<h2><i class="fa-solid fa-backward-fast" aria-label="backward-fast"></i> Recap: The DSL</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="Images/collect.svg"></p>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">Today, we’ll explore the <em>collecting</em> step of the DSL.</li>
<li class="fragment">Specifically, we’ll consider questions like:
<ul>
<li class="fragment">How should we collect our data? (<span class="alert"><strong>Study Design</strong></span>; <span class="alert"><strong>Sampling Techniques</strong></span>)</li>
<li class="fragment">Given knowledge about how our data was collected, how far are we allowed to generalize our findings? (<span class="alert"><strong>Scope of Inference</strong></span>)</li>
</ul></li>
</ul>
</div></div>
</section>
<section>
<section id="study-design" class="title-slide slide level1 center" data-background-color="black" data-background-image="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnh0YTFoZ2RudWVmeGgyM2k4OWp1c2NrdzNuM2lya25nbGZxeDNxZiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/11JTxkrmq4bGE0/giphy.gif" data-background-size="fill">
<h1>Study Design</h1>

</section>
<section id="diabetes" class="slide level2">
<h2><i class="fa-solid fa-droplet" aria-label="droplet"></i> Diabetes</h2>
<h3 id="an-example">An Example</h3>
<ul>
<li class="fragment">Type II diabetes is a condition characterized by unusually high levels of sugar in the bloodstream, and is estimated to affect somewhere around 11% of all US citizens.
<ul>
<li class="fragment">Typically, diabetes is diagnosed by examining an individual’s A1C Hemoglobin levels, which is used as a measure of average blood sugar level over the past two-to-three months.</li>
<li class="fragment">Exactly what cutoff is used to officially diagnose diabetes varies somewhat from doctor to doctor; generally, A1C levels of 6.5% or higher are considered to be in the diabetic range.</li>
</ul></li>
</ul>
</section>
<section id="diabetes-1" class="slide level2">
<h2><i class="fa-solid fa-droplet" aria-label="droplet"></i> Diabetes</h2>
<h3 id="an-example-1">An Example</h3>
<ul>
<li class="fragment"><p><em>Metformin</em> is one of a few popular prescription drugs used to treat diabetes by lowering an individual’s A1C levels.</p></li>
<li class="fragment"><p>Suppose we are hired as statistical consultants to determine whether or not we believe <em>Metformin</em> is effective in combating type II diabetes.</p></li>
<li class="fragment"><p>How might we go about formulating our conclusions?</p></li>
<li class="fragment"><p>Specifically, how might we design some sort of experiment to answer this question?</p></li>
</ul>
</section>
<section id="two-scenarios" class="slide level2">
<h2><i class="fa-solid fa-droplet" aria-label="droplet"></i> Two Scenarios</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Scenario 1:</strong></p>
<p>We sample 100 people at random, 50 of whom currently on metformin and 50 of whom are not. We then collect the A1C levels of all 100 participants, to obtain 100 different data points.</p>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Scenario 2:</strong></p>
<p>We sample 100 people at random, none of whom are currently on metformin. We then assign 50 of them to take metformin, and assign the other 50 to take a placebo. Finally, after a few months, we collect the A1C levels of all 100 participants.</p>
</div>
</div></div>
</section>
<section id="two-scenarios-1" class="slide level2">
<h2><i class="fa-solid fa-droplet" aria-label="droplet"></i> Two Scenarios</h2>
<ul>
<li class="fragment"><p>In both scenarios, the data we get out looks the same: 100 observations of A1C levels, 50 of which are from patients on metformin and 50 of which are from patients are not on metformin.</p></li>
<li class="fragment"><p>The two scenarios, however, do differ in one crucial aspect: whether we (as the experimenters) administer/withhold treatment or not.</p></li>
<li class="fragment"><p>This is the key distinction between an <span class="alert"><strong>observational study</strong></span> and an <span class="alert"><strong>experiment</strong></span>.</p>
<ul>
<li class="fragment">In an observational study, treatment is neither administered nor withheld. In an experiment, treatment is either explicitly administered or withheld.</li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Check Your Understanding</strong></strong></p>
</div>
<div class="callout-content">
<p>Which Scenario (1 or 2), corresponds to an observational study, and which corresponds to an experiment?</p>
</div>
</div>
</div>
</div>
</section>
<section id="observational-studies" class="slide level2">
<h2><i class="fa-solid fa-eye" aria-label="eye"></i> Observational Studies</h2>
<ul>
<li class="fragment"><p>The distinction between an observational study and an experiment is important not just for general purposes, but also for the purposes of <span class="alert"><strong>causal inference</strong></span>.</p></li>
<li class="fragment"><p>Broadly speaking, causal inference is the branch of statistics dedicated to trying to take associations between variables a step further, and determine whether or not one variable is causing a change in the other. Such relationships (in which one variable is causing or inducing a change in another) is called a causal relationship (or a causal effect).</p></li>
<li class="fragment"><p>We’ll talk about causal inference more later in this course.</p></li>
</ul>
</section>
<section id="observational-studies-vs.-experiments" class="slide level2">
<h2><i class="fa-solid fa-eye" aria-label="eye"></i> Observational Studies vs.&nbsp;Experiments</h2>
<ul>
<li class="fragment"><p>The reason I bring up causal inference is that we cannot (or, at least, it is highly cautioned against) make causal claims in an observational study.</p>
<ul>
<li class="fragment">Essentially, the argument goes: in an observational study, we are not allowed to control variables. As such, we cannot effectively control against <span class="alert"><strong>confounding variables</strong></span> (variables that affect our data, but that are uncontrolled).</li>
</ul></li>
<li class="fragment"><p>Now, that is not to say that associations in an experiment automatically imply causation. The only way to determine causality is to utilize tools from causal inference.</p></li>
<li class="fragment"><p>In an experiment, the group/s that are assigned treatment are called <span class="alert"><strong>treatment group(s)</strong></span>, and the group/s that have treatment withheld (or are administered a placebo) are called <span class="alert"><strong>control group(s)</strong></span></p></li>
</ul>
</section>
<section id="another-distinction" class="slide level2">
<h2><i class="fa-solid fa-clock" aria-label="clock"></i> Another Distinction</h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Scenario 1:</strong></p>
<p>We sample 50 people at random, none of whom are currently on metformin. We take their A1C levels at the start of the study, prescribe then metformin (which they take regularly), and then measure their A1C levels a few months later.</p>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Scenario 2:</strong></p>
<p>We sample 100 people at random, none of whom are currently on metformin. We then assign 50 of them to take metformin, and assign the other 50 to take a placebo. Finally, after a few months, we collect the A1C levels of all 100 participants.</p>
</div>
</div></div>
<ul>
<li class="fragment">Again, the end-product data are the same between the scenarios. Now, the key distinction is whether or not subjects were tracked over time.</li>
</ul>
</section>
<section id="longitudinal-vs.-cross-sectional-studies" class="slide level2">
<h2><i class="fa-solid fa-clock" aria-label="clock"></i> Longitudinal vs.&nbsp;Cross-Sectional Studies</h2>
<ul>
<li class="fragment"><p>This is the difference between <span class="alert"><strong>longitudinal studies</strong></span> (in which subjects are tracked over time) and <span class="alert"><strong>cross-sectional studies</strong></span> (in which there is no tracking over time).</p></li>
<li class="fragment"><p>Longitudinal studies lead to <span class="alert"><strong>paired</strong></span> or <span class="alert"><strong>grouped</strong></span>, in which there is serial correlation among observations.</p>
<ul>
<li class="fragment">For instance, a pre-metformin A1C measurement from Bob will most certainly be correlated with a post-metformin A1C measurement from Bob</li>
</ul></li>
<li class="fragment"><p>By the way, both observational studies and experiments could be longitudinal or cross-sectional.</p>
<ul>
<li class="fragment">As an example, classify the two scenarios on the previous page as either longitudinal or cross-sectional, and whether they come from an observational study or an experiment.</li>
</ul></li>
</ul>
</section>
<section id="your-turn" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Your Turn!</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Your Turn!</strong></strong></p>
</div>
<div class="callout-content">
<p><strong>Setup:</strong> A new pilot program is purported to help high school students perform better on the AP (Advanced Placement) AB Calculus exam. To test this claim, an experimenter selects 40 high school students at random, and assigns 20 of them to a class testing out the new program and 20 of them to a “standard” calculus class (that does not offer the new program). Before beginning the study, all 40 students are given an entrance exam (to use as a baseline score), and all 40 students take an exit survey at the end of the study.</p>
<ol type="a">
<li><p>Is this an observational study or an experiment?</p></li>
<li><p>Is this a longitudinal study or a cross-sectional study?</p></li>
<li><p>Suppose it is found that students who underwent the new program performed significantly better on the AP Calculus AB exam than students in the “traditional” classroom. Can we claim that the new program caused the increase in performance? If not, what are some potential confounding variables?</p></li>
</ol>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_b0721f8f" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:4rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section></section>
<section>
<section id="sampling-techniques" class="title-slide slide level1 center" data-background-color="black" data-background-image="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWd0NjNqemgyMzhzbnJqcDk3eXl1bWxxb2lwcmY4ZDIzNHp2NnM0YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l0G16FRujv2fiD3Ne/giphy.gif" data-background-size="60rem">
<h1>Sampling Techniques</h1>

</section>
<section id="sampling-terminology" class="slide level2">
<h2><i class="fa-solid fa-spell-check" aria-label="spell-check"></i> Sampling Terminology</h2>
<ul>
<li class="fragment"><p>There are three main terms we’ll start with: <span class="alert"><strong>target population</strong></span>, <span class="alert"><strong>access frame</strong></span>, and <span class="alert"><strong>sample</strong></span>.</p>
<ul>
<li class="fragment">Please note that these terms go by many names: sometimes the access frame is called the sampling frame; sometimes the target population is just called the “population”.</li>
<li class="fragment">We also assume that everything exists within a so-called universe, which we don’t always make explicit reference to.</li>
</ul></li>
<li class="fragment"><p><strong>Target Population</strong>: the set of observational units that we would like to investigate/make claims about.</p></li>
<li class="fragment"><p><strong>Access Frame</strong>: set of elements that we can actually reach/observe.</p></li>
<li class="fragment"><p><strong>Sample</strong>: the subset of elements taken from the access frame that we actually end up observing.</p></li>
</ul>
</section>
<section id="example-voter-turnout" class="slide level2">
<h2><i class="fa-solid fa-check-to-slot" aria-label="check-to-slot"></i> Example: Voter Turnout</h2>
<ul>
<li class="fragment"><p>Suppose we would like to determine which US voters are most likely to vote for a particular candidate in a local election, and suppose we do so by way of a text survey (i.e.&nbsp;a survey sent to people’s smartphones).</p></li>
<li class="fragment"><p>Some people don’t have a smartphone; these people will be a part of the target population (since they are a part of the set of people we’re interested in), but <em>not</em> part of the access frame (because they’re not accessible via our survey method).</p></li>
<li class="fragment"><p>Some people are ineligible to vote, but still have a smartphone; these people will be a part of the access frame (since they are accessible via our survey method), but <em>not</em> a part of the target population (since we’re only interested in voter turnout among those eligible to vote).</p></li>
</ul>
</section>
<section id="example-voter-turnout-1" class="slide level2">
<h2><i class="fa-solid fa-check-to-slot" aria-label="check-to-slot"></i> Example: Voter Turnout</h2>

<img data-src="Images/voter_sample.svg" class="r-stretch"></section>
<section id="example-voter-turnout-2" class="slide level2">
<h2><i class="fa-solid fa-check-to-slot" aria-label="check-to-slot"></i> Example: Voter Turnout</h2>

<img data-src="Images/voter_sample2.svg" class="r-stretch"></section>
<section id="more-formally" class="slide level2">
<h2><i class="fa-solid fa-square-root-variable" aria-label="square-root-variable"></i> More Formally</h2>
<ul>
<li class="fragment"><p>Let <span class="math inline">\(U_i\)</span> denote the <em>i</em><sup>th</sup> observational unit, and let <span class="math inline">\(I\)</span> denote the set of allowable indices for <em>i</em>.</p></li>
<li class="fragment"><p><strong>Universe:</strong> <span class="math inline">\(\mathcal{U} := \{U_i\}_{i \in I}\)</span></p></li>
<li class="fragment"><p><strong>Target Population:</strong> <span class="math inline">\(T_P := \{U_1, \cdots, U_n\} \subseteq \mathcal{U}\)</span></p>
<ul>
<li class="fragment">A subset (potentially an improper subset) of the universe containing the units of interest to the study</li>
</ul></li>
<li class="fragment"><p><strong>Access Frame:</strong> <span class="math inline">\(F = \{U_j \mid j \in J \subset I \}\)</span></p>
<ul>
<li class="fragment">A subset (potentially an improper subset) of the universe containing the units of accessible to the study</li>
</ul></li>
<li class="fragment"><p><strong>Sampled Population:</strong> <span class="math inline">\(S_P := T_P \cap F\)</span></p></li>
<li class="fragment"><p><strong>Sample:</strong> <span class="math inline">\(S \subseteq S_P\)</span></p></li>
</ul>
</section>
<section id="more-formally-1" class="slide level2">
<h2><i class="fa-solid fa-square-root-variable" aria-label="square-root-variable"></i> More Formally</h2>

<img data-src="Images/sampling2.svg" class="r-stretch"><ul>
<li class="fragment">There is still the question of which units from the sampled population actually get included in our sample.</li>
</ul>
</section>
<section id="census" class="slide level2">
<h2><i class="fa-solid fa-earth-africa" aria-label="earth-africa"></i> Census</h2>

<img data-src="Images/census.svg" class="r-stretch"><ul>
<li class="fragment"><p>In some ways, a census may seem “ideal”. So why don’t we hear more about censuses?</p></li>
<li class="fragment"><p>Firstly, censuses are often prohibitively <em>expensive</em> (both in terms of money and in terms of personpower required).</p></li>
<li class="fragment"><p>Censuses can also produce <em>imbalanced</em> samples, something we’ll talk more about later today.</p></li>
</ul>
</section>
<section id="other-sampling-structures" class="slide level2">
<h2><i class="fa-solid fa-person-shelter" aria-label="person-shelter"></i> Other Sampling Structures</h2>

<img data-src="Images/non_census2.svg" class="r-stretch"><ul>
<li class="fragment"><p>This is perhaps a slightly more common situation.</p></li>
<li class="fragment"><p>The natural follow-up question is: what mechanism should we implement to select units from the sampled population?</p>
<ul>
<li class="fragment">This mechanism is often <em>random</em>, leading to <span class="alert"><strong>probabilistic samples</strong></span> (sometimes called <span class="alert"><strong>random samples</strong></span>).</li>
</ul></li>
<li class="fragment"><p>Over the next few slides, we’ll discuss some of these probabilistic sampling techniques.</p></li>
</ul>
</section>
<section id="simple-random-sampling" class="slide level2">
<h2><i class="fa-solid fa-vial" aria-label="vial"></i> Simple Random Sampling</h2>
<ul>
<li class="fragment"><p>Suppose every unit in the sampled population has an equal chance of being included in our sample.</p>
<ul>
<li class="fragment">That is, let <em>π</em><sub><em>i</em></sub> denote the probability that unit <em>i</em> is included in the sample (we call this the <span class="alert"><strong>inclusion probability</strong></span>); then suppose <em>π</em><sub><em>i</em></sub> = <em>π</em><sub><em>j</em></sub> for every <em>i</em> ≠ <em>j</em></li>
</ul></li>
<li class="fragment"><p>Such a sample is called a <span class="alert"><strong>simple random sample</strong></span> (SRS).</p>
<ul>
<li class="fragment">Again, the hallmark of an SRS is that each unit in the frame has an equal chance of being included in our sample.</li>
</ul></li>
<li class="fragment"><p><strong>Question for you:</strong> in a census, what is the inclusion probability <em>π</em><sub><em>i</em></sub>?</p></li>
<li class="fragment"><p>By the way: it is possible to take SRSes with or without replacement. In real-world settings, sampling without replacement is far more common however sampling <em>with</em> replacement tends to make inference (the topic of tomorrow’s lecture) a bit easier.</p></li>
</ul>
</section>
<section id="moving-beyond-simple-random-sampling" class="slide level2">
<h2><i class="fa-solid fa-flask" aria-label="flask"></i> Moving Beyond Simple Random Sampling</h2>
<ul>
<li class="fragment">Simple random sampling is sometimes touted as a “gold standard” for sampling.
<ul>
<li class="fragment">Admittedly, it is true that inference for SRSes is a lot simpler than inference for samples taken according to other schemes (some of which we’ll discuss in a bit).
<ul>
<li class="fragment">Basically, samples that are taken as an SRS (with replacement) can be treated as i.i.d. (independently and identically distributed) random variables, meaning we can use our PSTAT 120A and 120B knowledge to easily model, perform inference, predict, etc.</li>
</ul></li>
</ul></li>
<li class="fragment">However, simple random samples are not immune to the effects of bias.</li>
</ul>
</section>
<section id="moving-beyond-simple-random-sampling-1" class="slide level2">
<h2><i class="fa-solid fa-flask" aria-label="flask"></i> Moving Beyond Simple Random Sampling</h2>
<ul>
<li class="fragment"><p>Let’s say we have been hired as an external consultant for some company, which wants to conduct a climate survey on its employees.</p>
<ul>
<li class="fragment">If we take an SRS of employees, it seems like we should get a pretty unbiased sample.</li>
<li class="fragment">Well, what if I told you 80% of employees at this company identified as white. Still think our sample will be free of bias?</li>
</ul></li>
<li class="fragment"><p>Indeed, an SRS will very nicely preserve (or, at the very least, imitate) the structure of the sampled population.</p></li>
<li class="fragment"><p>So, if the sampled population has sources of systematic bias, so too may our SRS.</p>
<ul>
<li class="fragment">Emphasis on <em>may</em> - it is certainly <em>possible</em> that we just so happen to obtain a sample that is balanced in terms of race. But, is it <em>probable</em>?</li>
</ul></li>
</ul>
</section>
<section id="stratified-random-sampling" class="slide level2">
<h2><i class="fa-solid fa-cloud" aria-label="cloud"></i> Stratified Random Sampling</h2>
<ul>
<li class="fragment"><p>To obtain a more <em>balanced</em> sample, consider the following scheme: divide the employees by the race they most identify with, and then take an SRS of employees from each race.</p></li>
<li class="fragment"><p>This is an example of a <span class="alert"><strong>stratified random sample</strong></span>.</p></li>
<li class="fragment"><p>In a stratified random sample, the sampled population is divided into a series of groups, called <span class="alert"><strong>strata</strong></span> (singular, <span class="alert"><strong>stratum</strong></span>), and an SRS is taken from each stratum.</p></li>
</ul>
<div class="fragment" style="text-align:center">
<p><img data-src="Images/stratified.svg"></p>
</div>
</section>
<section id="leadup" class="slide level2">
<h2><i class="fa-solid fa-stairs" aria-label="stairs"></i> Leadup</h2>
<ul>
<li class="fragment"><p>Let’s say we’re working with the superintendent for a certain school district, and we want to assess the education level of students across schools in this district.</p></li>
<li class="fragment"><p>Let’s also suppose the schools themselves are relatively similar to one another.</p></li>
<li class="fragment"><p>We might be tempted to take a stratified sample, using each school as a stratum.</p>
<ul>
<li class="fragment">This would work! But, it’s a bit overkill, mainly because the schools are all relatively similar to each other.</li>
</ul></li>
<li class="fragment"><p>As such, a more efficient scheme might be to randomly select some schools, and then take an SRS from each of the sampled schools.</p></li>
</ul>
</section>
<section id="cluster-sampling" class="slide level2">
<h2><i class="fa-solid fa-circle-nodes" aria-label="circle-nodes"></i> Cluster Sampling</h2>
<ul>
<li class="fragment"><p>As such, a more efficient scheme might be to randomly select some schools, and then take an SRS from each of the sampled schools.</p></li>
<li class="fragment"><p>This is an example of a <span class="alert"><strong>cluster sampling scheme</strong></span>: the sampled population is (again) divided into a series of groups (now called <span class="alert"><strong>clusters</strong></span>); an SRS of clusters is taken, and then an SRS from the sampled clusters is taken.</p>
<ul>
<li class="fragment"><span class="bg" style="--col: #f5e287"><strong>CAUTION:</strong></span> IMS calls this “multistage sampling” (and calls something else cluster sampling). This is a bit nonstandard - the definitions above are more standard, which is why we’re adopting them for this course.</li>
</ul></li>
</ul>
</section>
<section id="cluster-sampling-1" class="slide level2">
<h2><i class="fa-solid fa-circle-nodes" aria-label="circle-nodes"></i> Cluster Sampling</h2>
<p><br>
</p>

<img data-src="Images/cluster.svg" class="r-stretch"></section>
<section id="comparisons" class="slide level2">
<h2><i class="fa-solid fa-code-compare" aria-label="code-compare"></i> Comparisons</h2>
<ul>
<li class="fragment"><p>As a concrete example, consider drawing a sample of size 20 from the set of integers {1, 2, …, 100}.</p></li>
<li class="fragment"><p>On the next slide are three such samples, each sampled according to a different strategy.</p>
<ul>
<li class="fragment">To generate the SRS, I simply used the <code>sample()</code> function from <code>R</code>.
<ul>
<li class="fragment">As an aside, if you want to sample rows from a dataframe, consider using the <code>dplyr::slice_sample()</code> function</li>
</ul></li>
<li class="fragment">To generate the stratified random sample, I divided the population into 10 strata: {1, …, 10}, {11, …., 20}, …., {91, …, 100}, and took an SRS of size 2 from each stratum.</li>
<li class="fragment">To generate the cluster random sample, I divided the population into 20 clusters: {1, …, 5}, {6, …, 10}, …., {96, …, 100}. I then took an SRS of 10 of these clusters, and took an SRS of size 2 from each cluster.</li>
</ul></li>
</ul>
</section>
<section id="comparisons-1" class="slide level2">
<h2><i class="fa-solid fa-code-compare" aria-label="code-compare"></i> Comparisons</h2>

<img data-src="Lec08_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="your-turn-2" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Your Turn!</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Your Turn!</strong></strong></p>
</div>
<div class="callout-content">
<p><em>DacMonalds</em> wants to compare sales across its different regional locations. With over 40,000 locations, company executives cannot examine sales reports from each and every location. Propose a sampling scheme that we could use to collect data; be as specific as possible.</p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_37c0d4ff" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:6rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="scope-of-inference" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass" aria-label="magnifying-glass"></i> Scope of Inference</h2>
<ul>
<li class="fragment"><p>So, why should we care how our sample was taken?</p></li>
<li class="fragment"><p>For one thing, knowledge about this is crucial in handling <span class="alert"><strong>missing values</strong></span> (which we will talk about in a few minutes).</p></li>
<li class="fragment"><p>But, our goal with data is (often) to use it <em>to make broader claims about the world</em>.</p>
<ul>
<li class="fragment">More specifically, we often wish to use our data to make claims about the <em>population</em>.</li>
</ul></li>
<li class="fragment"><p>The <span class="alert"><strong>scope of inference</strong></span>, loosely speaking, refers to extent to which conclusions based on the sample are generalizable to the population and/or universe.</p>
<ul>
<li class="fragment">Indeed, identifying the scope of inference for a particular dataset requires knowledge about how the data was collected!</li>
</ul></li>
</ul>
</section>
<section id="scope-of-inference-1" class="slide level2">
<h2><i class="fa-solid fa-magnifying-glass" aria-label="magnifying-glass"></i> Scope of Inference</h2>
<ul>
<li class="fragment"><p>As a simple (but somewhat extreme) example, opinions on gun control collected from US citizens cannot be used to make conclusions or claims about the views on gun control held by citizens of, say, Canada.</p></li>
<li class="fragment"><p>Even data based on an SRS of individuals taken from the pool of US citizens may have limited scope of inference; for instance, if our sample ends up including a disproportionate amount of male-identifying respondants then our conclusions may not generalize to female-identifying respondants.</p></li>
<li class="fragment"><p>More or less, whether or not we can generalize the results of a sample to the population boils down to whether or not the sample is representative of the population.</p></li>
<li class="fragment"><p>Naturally, this question of representativeness is tied with the relationship between the population, frame, and sample, which is why we started off by talking about these notions.</p></li>
</ul>
</section>
<section id="your-turn-4" class="slide level2">
<h2><i class="fa-solid fa-pencil" aria-label="pencil"></i> Your Turn!</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><strong>Your Turn!</strong></strong></p>
</div>
<div class="callout-content">
<p><strong>SETUP</strong>: A new pilot program is purported to help high school students perform better on the AP (Advanced Placement) AB Calculus exam. To test this claim, an experimenter takes a <u>simple random sample</u> of 40 high school students <u>from Santa Barbara</u>, and assigns 20 of them to a class testing out the new program and 20 of them to a “standard” calculus class (that does not offer the new program). Before beginning the study, all 40 students are given an entrance exam (to use as a baseline score), and all 40 students take an exit survey at the end of the study. <u>It is found that students in the pilot program performed significantly better on the AP Calculus AB exam than students in the “traditional” classroom.</u></p>
<ol type="a">
<li><p>Are we justified in concluding that the pilot program will work, on average, for residents of Santa Barbara?</p></li>
<li><p>Are we justified in concluding that the pilot program will work, on average, for residents of California?</p></li>
<li><p>Are we justified in concluding that the pilot program will work, on average, for US residents?</p></li>
</ol>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_ed11c928" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:4rem;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="bias" class="slide level2">
<h2><i class="fa-solid fa-toggle-off" aria-label="toggle-off"></i> Bias</h2>
<ul>
<li class="fragment"><p>Let’s talk a bit about <span class="alert"><strong>bias</strong></span>.</p></li>
<li class="fragment"><p>There’s a formal statistical definition of bias, which we’ll discuss in a few lectures. Today, let’s discuss bias at a high level: broadly speaking, we can think of bias as discrepancies between some aspect of the sample and the corresponding aspect of the population.</p></li>
<li class="fragment"><p><span class="alert"><strong>Selection bias</strong></span> occurs when some part of the population is not in the sampled population</p>
<ul>
<li class="fragment">For example, an experimenter interested in collecting household income data who neglects to survey transient (aka unhoused) persons will most definitely obtain a biased sample.</li>
</ul></li>
<li class="fragment"><p><span class="alert"><strong>Non-response bias</strong></span> occurs when a subset of the sampled population is included in the sample, but choose not to contribute data (e.g.&nbsp;didn’t fill out a survey, didn’t pick up the phone, dropped out of a study for personal reasons, etc.)</p></li>
</ul>
</section>
<section id="bias-1" class="slide level2">
<h2><i class="fa-solid fa-toggle-off" aria-label="toggle-off"></i> Bias</h2>
<ul>
<li class="fragment">Note the distinction between selection and non-response bias. In both cases, we may end up with a group of <span class="alert"><strong>missing values</strong></span> from our dataset.
<ul>
<li class="fragment">The mechanisms behind <em>why</em> they are missing, however, are very different across the two types of bias.</li>
<li class="fragment">In selection bias, values are missing because we, as experimenters, <em>chose</em> to exclude them (for whatever reason).</li>
<li class="fragment">In non-response bias, values are missing for reasons <em>outside our control</em>.</li>
</ul></li>
<li class="fragment">This distinction will become important later in the course, when we talk about how to handle missing data.</li>
</ul>
</section>
<section id="convenience-sampling" class="slide level2">
<h2><i class="fa-solid fa-store" aria-label="store"></i> Convenience Sampling</h2>
<ul>
<li class="fragment"><p>Suppose we’re interested in conducting a survey on UCSB students’ attitudes toward police on campus.</p></li>
<li class="fragment"><p>One way we might administer this survey is to stand outside the PSTAT main office and pick the first 100 students we see to participate in a survey.</p></li>
<li class="fragment"><p>Indeed, assuming we don’t have any non-response bias, we’ll get 100 people in our “sample!”</p>
<ul>
<li class="fragment">But, is this really a <em>quality</em> sample?</li>
<li class="fragment">In fact, is this even really a <em>random</em> sample?</li>
<li class="fragment">I think most of us would say, “no.”</li>
</ul></li>
<li class="fragment"><p>More generally, as the name suggests, a convenience sample is obtained by drawing whichever units from the population are most convenient.</p></li>
</ul>
</section>
<section id="convenience-sampling-1" class="slide level2">
<h2><i class="fa-solid fa-store" aria-label="store"></i> Convenience Sampling</h2>
<ul>
<li class="fragment"><p>Convenience samples often have <em>zero</em> scope of inference.</p></li>
<li class="fragment"><p>Unfortunately, there are still some published studies that are based on convenience samples.</p>
<ul>
<li class="fragment">Often, these are motivated by the idea that some data is better than no data.</li>
</ul></li>
<li class="fragment"><p>However, we also have to contend with what is often called the <span class="alert"><strong>garbage-in garbage-out</strong></span> philosophy.</p>
<ul>
<li class="fragment">Loosely speaking, even the most sophisticated data science techniques will produce meaningless (and sometimes dangerous) results if they are applied to poorly-sampled data.</li>
</ul></li>
</ul>
</section>
<section id="next-time" class="slide level2">
<h2><i class="fa-solid fa-forward-fast" aria-label="forward-fast"></i> Next Time</h2>
<ul>
<li class="fragment"><p>Tomorrow, we’ll begin our transition into <em>inferential statistics</em>.</p>
<ul>
<li class="fragment">Please brush up on your PSTAT 120A material!</li>
</ul></li>
<li class="fragment"><p>In lab tomorrow, you’ll get some practice with sampling, along with some topics from tomorrow’s lecture.</p></li>
<li class="fragment"><p><span class="bg" style="--col: #f5e287"><strong>REMINDER:</strong></span> Keep working on the Mid-Quarter Project!</p>
<ul>
<li class="fragment">Your reports are due this <strong>Sunday</strong> (July 13) by 11:59pm.</li>
<li class="fragment">Kindly recall that no late submissions will be accepted for any reason.</li>
<li class="fragment">Only one member needs to submit to Gradescope; they will be prompted to match all group member names.</li>
</ul></li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="Images/logo.svg" class="slide-logo"></p>
<div class="footer footer-default">
<p>PSTAT 100 - Data Science: Concepts and Analysis, Summer 2025 with Ethan P. Marzban</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="../../site_libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'multiplex': {"secret":"17517887074074602925","id":"b31bdf9d5264b0af","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>